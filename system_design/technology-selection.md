# 代码技术选型
> 开发时需要用到的框架、组件等
## 前端开发
| 模块 | 技术 | 用途 |
| ---- | -------- | -------- |
| 框架 | vue3 | 前端框架 |
| 语言 | Typescript | 强类型封装 |
| 通信 | fetch | 前端请求 |
| 界面组件 | AntD | UI库 |
| 工具链 | yarn | 依赖包管理 |
| 代码规范 | eslint | 前端代码规范统一 |

## 后端开发
| 模块 | 技术 | 用途 |
| ---- | -------- | -------- |
| 框架 | Python + flask | 后端web框架 |
| 存储 | Mysql | 传统数据库 |
| 表单处理 | Flask-WTF | Web表单处理与验证 |
| 数据处理 | marshmallow | 数据序列化与反序列化 |
| 云平台 | 阿里云 | 部署后端服务、存储与模型托管 |

## 模型应用与调优

| 技术栈 | 框架/库 | 作用 |
| --- | --- | --- |
| **文档解析与切分** | 阿里云文档智能 (Document Mind) / GeoLayoutLM | 替代传统解析库，实现对复杂文档的细粒度解析和基于版面分析的语义切分 |
| **工作流编排** | LangChain / langgraph | 编排RAG流程，管理prompt、模型和解析器 |
| **向量数据库** | Weaviate | 存储和检索文本向量 |
| **嵌入模型** | BGE-large-zh | 将文本转换为高质量的向量表示 |
| **大模型接口** | Qwen（阿里云 PAI-EAS） | 生成解决方案 |
| 可观测性与调试 | LangSmith | 追踪、可视化和调试大语言模型应用，优化和排查问题 |
| 系统评估框架 | RAGAs | 自动化生成评估数据，并提供全面的RAG系统质量评估指标 |
| 加分项 | 自己微调一个小模型做问题分类；根据用户点击反馈调整排序 | 提升系统智能化程度 |

<br><br/>
<br><br/>
<br><br/>

# 云服务技术选型
> 旨在以“0成本”或极低的成本（通常低于10元/月）搭建并运行一个功能完整的RAG问答系统，以满足竞赛的演示和开发需求。

## 核心思路

我们的目标是避免使用需要长期开启且费用较高的虚拟机（ECS），最大限度地利用阿里云各项产品的**免费额度**和**Serverless能力**。通过将项目架构拆解，并与特定的云产品免费套餐进行映射，实现近乎零成本的云上部署。

## 准备工作：获取学生权益

一切“0成本”部署的基础是获得阿里云的学生身份认证。

1.  **注册与实名**：注册阿里云账号，并完成个人实名认证。
2.  **学生认证**：访问“[高校学生“飞天加速计划”](https://developer.aliyun.com/plan/student)”页面，按照指引完成学生身份认证。认证通过后，您将获得多种云产品的免费额度或学生专属优惠价。

## “0成本”技术选型方案

下表将本项目的技术组件与推荐的、有免费额度的阿里云产品进行对应：

| 组件类别 | 原定技术栈 | “0成本”学生方案 | 免费额度说明 | 备注 |
| :--- | :--- | :--- | :--- | :--- |
| **前端部署** | 未定义 | **OSS 静态网站托管** | OSS提供免费存储和流出流量包 | 将Vue应用打包后直接上传至OSS Bucket，开启静态网站访问即可。 |
| **后端服务** | Python Flask + ECS | **函数计算 FC** | 每月百万次调用+40万vCPU-s免费 | 将Flask应用改造为Serverless架构，每个API对应一个函数，按需执行，无请求不花钱。 |
| **文档解析处理** | 未定义 | **阿里云文档智能 (Document Mind)** | 通常提供新用户免费试用或按量付费的免费额度 | 用于替代传统解析库，实现对PDF、图片等复杂文档的精准解析和结构化输出。 |
| **大模型推理** | Qwen + PAI-EAS | **PAI-EAS 免费版** | 提供1核2G CPU的免费服务实例 | 用于部署Qwen-7B或更小规模的量化模型，满足Demo级推理需求。 |
| **向量存储** | Weaviate | **阿里云OpenSearch（向量检索版）** 或 **DashVector** | 两者均提供新用户免费试用或一定额度的免费版 | 全托管的向量检索服务，无需自行部署和维护。 |
| **知识库存储** | 本地/ECS磁盘 | **对象存储 OSS** | 提供每月50GB标准存储等免费额度 | 用于存放原始知识文档（PDF、Markdown等）。 |
| **用户数据库** | MySQL | **RDS for MySQL** | 提供新用户免费试用实例 | 如果用户量不大，也可简化为文件存储在OSS或使用表格存储。 |
| **AI工作流编排** | LangChain / langgraph | 不变 | - | 在函数计算FC中运行Python代码即可。 |

## 分步实施指南

### 第一步：部署前端应用

1.  **打包应用**：在本地使用 `yarn build` 命令打包您的 Vue 前端项目。
2.  **创建OSS Bucket**：登录阿里云控制台，创建一个人OSS Bucket，将“读写权限”设置为“公共读”。
3.  **上传文件**：将本地 `dist` 目录下的所有文件上传到OSS Bucket的根目录。
4.  **开启静态网站托管**：在Bucket的设置中，找到“静态页面”，将默认首页设置为 `index.html`。
5.  **访问**：您将获得一个OSS提供的域名，通过该域名即可访问您的前端应用。

### 第二步：部署后端Serverless API

1.  **代码改造**：将现有的Flask后端进行微小的改造，使其适应函数计算的事件触发模型。通常需要一个 `index.py` 作为入口，处理API网关的请求。
2.  **创建函数服务**：在“函数计算FC”控制台，创建一个新的服务和函数。
3.  **部署代码**：通过上传代码包或使用Serverless Devs工具，将您的Python代码部署上去。
4.  **配置触发器**：为函数创建一个“HTTP(S)触发器”，这样函数就能通过公网URL被前端调用。

### 第三步：搭建RAG核心管线

1.  **开通并配置AI服务**：
    *   **模型服务 (PAI-EAS)**: 访问“PAI-EAS”控制台，在“模型服务市场”中找到并**免费部署**`qwen-7b-chat-int4`（用于生成答案）和 `bge-large-zh-v1.5`（用于文本向量化）。记录下各自的Endpoint和Token。
    *   **文档智能服务 (Document Mind)**: 访问“文档智能”控制台，开通服务并领取新用户免费试用额度。在API管理中获取访问密钥（AccessKey）。
    *   **向量库服务**: 访问“OpenSearch”或“DashVector”控制台，创建一个向量检索实例或集群，并记录下访问地址和API密钥。

2.  **搭建自动化知识处理流水线 (ETL)**：
    *   **核心思路**：利用函数计算（FC）构建一个由OSS事件触发的、包含“解析->切分->向量化->入库”四步骤的自动化工作流。
    *   **函数1：文档解析函数 (由OSS触发)**
        *   **触发器**：监听存放原始知识文档的OSS Bucket的“文件上传”事件。
        *   **核心逻辑**：当有新文档（如PDF、扫描件）上传时，该函数被自动调用。它会调用**文档智能API**，将文件发送进行细粒度解析。
        *   **输出**：将文档智能返回的、包含层级和结构的JSON或Markdown结果，存回OSS的一个新目录中（例如 `parsed/`）。
    *   **函数2：语义切分与向量化函数 (由新目录的OSS事件触发)**
        *   **触发器**：监听 `parsed/` 目录的“文件上传”事件。
        *   **核心逻辑**：
            1.  读取已解析的结构化文件。
            2.  执行**语义切分**算法，根据标题层级、段落、表格等信息，将内容切分为有意义的知识片段（Chunks）。
            3.  调用之前部署的**BGE嵌入模型EAS服务**，将每个知识片段转换为向量。
            4.  将知识片段的原文、元数据（如原始页码、类型）及其对应的向量，批量写入到**向量数据库**中。