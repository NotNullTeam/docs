# UI / UX设计蓝图

## 一、 设计总览

*   **核心理念**: 构建一个集**宏观监控（数据看板）、案例复盘（诊断历史）、微观诊断（可视化路径图）** 于一体的智能化、专业化网络运维工作平台。
*   **布局架构**: 采用功能分区明确的**三栏式布局**。
*   **交互原则**: 行动导向、上下文保留、即时反馈、流程闭环。
*   **主题支持**: 支持浅色、深色及跟随系统三种外观模式。

## 二、 界面布局

### 1. 左侧：导航与诊断历史面板
*   **顶部**: 用户信息 (`Avatar`)、发起新诊断 (`Button`)、过滤条件 (`Button` → 打开 `Modal`)、搜索诊断历史 (`Input.Search`)。
*   **中部**: 诊断历史列表 (`List`)；筛选通过顶部过滤按钮触发的 **过滤条件 `Modal`**（设备品牌 / 问题类型 / 附件类型）。每个条目包含状态 (`Tag`)、标题和时间，并在折叠侧边栏时以彩色图标形式展示。
*   **底部**: 全局功能菜单 (`Menu`)，包含“数据看板”、“系统设置”（点击后进入独立页面）、侧边栏折叠/展开控制。
*   **折叠交互**: 侧边栏支持宽 / 窄两种状态，窄状态仅保留彩色图标，点击任意图标后自动展开。

### 2. 中心：主画布区域
*   **默认态 (数据看板)**: 全局统计图表（故障分类饼图、解决率趋势折线图、知识覆盖度热力图）。
*   **激活态 (诊断路径图)**: 针对单个诊断会话的可视化分析流程。

### 3. 右侧：上下文详情面板
*   **Tab 结构 (`Tabs`)**: `节点详情` / `知识溯源` / `可复制命令`。
    * **节点详情**: 展示日志高亮、补充信息输入框，以及 **附件预览折叠面板**（支持图片放大）。
    * **知识溯源**: 高亮命中文本，显示 **相似度 / 关键词分数** 条，并提供“跳转原文”外链；顶部提供**相关性权重**三段式按钮。
      * **权重控制**: 使用“三段式按钮”（关键词优先 / 平衡 / 语义优先）。
    * **可复制命令**: 按厂商划分的 `Tabs`（华为/思科/Juniper…），默认根据设备品牌自动选中。

## 三、 登录与设置

### 1. 登录流程
*   **初始状态**: 应用加载后，若用户未登录，则显示全屏 **登录 `Modal`**。
*   **输入**: 用户名 (`Input`) 和密码 (`Input`)。
*   **验证**: 成功后 `Modal` 消失，应用主界面加载；失败则显示错误提示。
*   **登出**: 用户可在“账号设置”页面中主动登出，返回登录界面。

### 2. 设置页面
*   **入口**: 点击左侧边栏底部的“系统设置”图标，或点击顶部用户信息区，可分别进入“系统设置”和“账号设置”页面。
*   **系统设置**:
    *   **外观**: 提供下拉菜单 (`Select`) 切换浅色 / 深色 / 跟随系统主题。
    *   **通知**: 提供复选框 (`Checkbox`) 管理不同类型的应用内通知。
    *   **API密钥**: 管理第三方服务集成的密钥。
*   **账号设置**:
    *   **个人资料**: 显示用户头像、姓名、部门等不可编辑信息。
    *   **安全**: 提供修改密码的功能。
    *   **登出**: 提供退出登录按钮。

## 四、 核心操作逻辑流程

### 1. 旅程一：创建一次全新的诊断会话

1.  **用户操作**: 点击左上角 **“发起新诊断”** 按钮。
2.  **系统响应**: 弹出 `Modal` 对话框，要求用户输入问题标题、详细描述，并通过 `Upload.Dragger` 上传图片 / 拓扑 / 日志压缩包。
3.  **用户操作**: 填写完毕，点击“开始诊断”。
4.  **系统响应**:
    *   `Modal` 关闭。
    *   左侧 **“诊断历史”** 列表顶部新增一个条目，状态为“诊断中”。
    *   中心画布切换至“诊断路径图”视图，并出现代表用户问题的起始节点，呈现分析中状态。
    *   右侧详情面板的 **“节点详情”** Tab 自动展开“附件预览”折叠面板，显示缩略图。

### 2. 旅程二：处理一次进行中的诊断会话

1.  **用户操作**: 在左侧 **“诊断历史”** 列表中，点击一个进行中的诊断会话。
2.  **系统响应**: 中心画布加载并展示该会话的可视化诊断路径图。
3.  **用户操作（可选）**: 在右侧 **“知识溯源”** Tab 中调整 **相关性权重**，或通过左侧过滤按钮打开 `Modal` 选择筛选条件，实时重排右侧“知识溯源”片段。
4.  **用户操作**: 点击图中一个需要用户输入的“Agent追问”节点。
5.  **系统响应**:
    *   该节点在画布上高亮。
    *   **右侧详情面板**更新，显示Agent的问题，并提供输入框和上传控件。
6.  **用户操作**: 在右侧面板提交补充信息。
7.  **系统响应**: 画布上从“Agent追问”节点引出新边，连接到“用户补充信息”新节点，系统继续进行分析。

### 3. 旅程三：结束一次诊断会话并提供反馈

1.  **系统响应**: 画布上出现最终的“解决方案”节点。
2.  **用户操作**: 点击该节点。
3.  **系统响应**: 右侧详情面板展示详细步骤和可复制命令，并在显著位置提供 **“👍 已解决”** 和 **“👎 未解决”** 两个反馈按钮。
4.  **用户操作**: 点击 **“👍 已解决”** 或 **“👎 未解决”**。
5.  **系统响应**:
    *   **[当前状态]** 点击按钮后，前端暂无进一步交互，仅为UI占位。
    *   **[未来实现]** 弹出二级表单：若成功，可补充标签 / 场景；若失败，填写原因并可追加日志。
    *   **[未来实现]** 表单提交后触发后台知识库更新，并给出全局提示，更新画布节点及左侧条目状态。